deploy:
  runs-on: ubuntu-latest
  needs: build
  steps:
  - uses: actions/checkout@v2

  - name: Setup .NET
    uses: actions/setup-dotnet@v1
    with:
      dotnet-version: '6.0.x'

  - name: Publish
    run: dotnet publish -c Release -o ./publish

  - name: Deploy to AWS Elastic Beanstalk
    uses: einaregilsson/beanstalk-deploy@v18
    with:
      aws_access_key: ${{ secrets.AWS_ACCESS_KEY }}
      aws_secret_key: ${{ secrets.AWS_SECRET_KEY }}
      application_name: your-app-name
      environment_name: your-env-name
      version_label: ${{ github.sha }}
      region: your-region
      deployment_package: ./publish
